{
  // Worker configuration
  "name": "rag",
  "main": "src/index.ts",
  "compatibility_date": "2025-01-10",
  "observability": {
    "enabled": true
  },

  // AI binding for Workers AI
  "ai": {
    "binding": "AI"
  },

  // Environment variables
  "vars": {
    "ENABLE_TEXT_SPLITTING": true
    // Optional: Set Anthropic model version (requires ANTHROPIC_API_KEY secret)
    // "ANTHROPIC_MODEL": "claude-3-5-sonnet-latest"
  },

  // Rules for handling static assets
  "rules": [
    {
      "type": "Text",
      "globs": ["**/*.html"],
      "fallthrough": true
    }
  ],

  // D1 Database binding
  "d1_databases": [
    {
      "binding": "DATABASE",
      "database_name": "ai-example",
      "database_id": "e413bdf8-5466-47c9-8520-05f51fbc5f01"
    }
  ],

  // Vectorize Index binding
  "vectorize": [
    {
      "binding": "VECTOR_INDEX",
      "index_name": "tutorial-index-768", 
      "remote": true
    }
  ],

  // Workflows binding
  "workflows": [
    {
      "name": "rag",
      "binding": "RAG_WORKFLOW",
      "class_name": "RAGWorkflow"
    }
  ],

  // KV namespace for storing full documents
  "kv_namespaces": [
    {
      "binding": "DOCUMENTS",
      // TODO: Replace with actual KV namespace ID created via `wrangler kv:namespace create DOCUMENTS`
      "id": "50d4bf6f8c4e4306806e9a5d2676299b"
    }
  ]
}
